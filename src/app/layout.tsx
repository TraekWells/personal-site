import type { Metadata } from "next";
import "../styles/main.scss";
import { bodyFont, codeFont } from "@/fonts";
import Footer from "@/components/Footer";
import SiteNavigation from "@/components/SiteNavigation";
import { cookies } from "next/headers";
import BackgroundGridLines from "@/components/BackgroundGridLines";

export const metadata: Metadata = {
  title: {
    default: "Traek Wells",
    template: "%s | UX Designer & Front-End Developer",
  },
  description: "Generated by create next app",
};

type RootLayoutProps = {
  children: React.ReactNode;
};

export default async function RootLayout({ children }: RootLayoutProps) {
  const cookieStore = await cookies();
  const savedTheme = cookieStore.get("color-theme");
  const theme = savedTheme?.value || "light";

  // Use context here instead of prop drilling?

  return (
    <html
      lang="en"
      className={`${bodyFont.variable} ${codeFont.variable}`}
      data-theme={theme}
    >
      <head>
        <link rel="icon" href="favicon.png" sizes="any" />
      </head>
      <body>
        <SiteNavigation initialTheme={theme} />
        {children}
        <Footer />
        <div id="mobile-menu-portal"></div>
        <BackgroundGridLines />
      </body>
    </html>
  );
}
